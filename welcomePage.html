<html>
	<head>
		<!--table styling-->
		<style>
			table {
				border-collapse: collapse;
				width: 70%;
			}

			td, th {
				border: 1px solid #dddddd;
				text-align: left;
				padding: 8px;
			}

			tr:nth-child(even) {
				background-color: #dddddd;
			}
		</style>
	</head>
	<body>
		<?php
			require "init.php";
			session_start();
			
			if(isset($_SESSION['sessionName'])){
				//used for getting the ID of the logged in user for inserting new rides, not here; to be deleted after completed testing
				$uporabnisko_ime = $_SESSION['sessionName'];
				$sql_query = "select id_uporabniki from sk6_uporabniki where uporabnisko_ime like '$uporabnisko_ime';";
				$result = mysqli_fetch_row(mysqli_query($con,$sql_query));
				echo "id: ".$result[0];
				echo ", ime: ".$uporabnisko_ime;
			}else{
				echo "error in session";
			}
		?>
		<br />
		<br />
		<!--table, where all the possible offers are displayed here; at the end of testing, to add function that doesn't display offers that are older than the current time-->
		<table>
			<tr>
				<th>Od</th>
				<th>Do</th>
				<th>Cas</th>
				<th>Cena</th>
			</tr>

			<?php
				//php script for getting carpooling offer from database and then in a while loop to write each row in HTML table
				$sql_query="select od, do, cas, cena from sk6_prevozi order by cas, od;";
				$result = mysqli_query($con,$sql_query);
				
				while($row = mysqli_fetch_array($result)){
			?>
			
			<tr>
				<td><?php echo $row['od']?></td>
				<td><?php echo $row['do']?></td>
				<td>
					<?php
						//converting time to a more suitable format
						$dan = substr($row['cas'], 8, 2);
						$mesec = substr($row['cas'], 5, 2);
						$leto = substr($row['cas'], 0, 4);
						$ura = str_replace("0", "", substr($row['cas'], 11, 2));
						$minuta = substr($row['cas'], 14, 2);
						echo $dan.".".$mesec.".".$leto.", ob ".$ura.":".$minuta;
					?>
				</td>
				<td><?php echo $row['cena']." Eur"?></td>
			</tr>
			
			<?php
				}
			?>
		</table>				
	</body>
</html>